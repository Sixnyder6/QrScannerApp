# Документация по модулю Warehouse

Этот документ описывает назначение каждого файла в пакете `com.example.qrscannerapp.features.inventory.ui.Warehouse`.

### `WarehouseModels.kt`

**Назначение:** Определяет модели данных (data classes), используемые во всем модуле склада.
- **`WarehouseItem`**: Модель для товара на складе. Хранит информацию о названии, артикуле, количестве, категории и т.д. Предназначена для работы с Firestore.
- **`WarehouseLog`**: Модель для записи в журнале операций. Отслеживает изменения количества товаров, пользователя и время операции.

### `WarehouseScreen.kt`

**Назначение:** Компонент пользовательского интерфейса (UI), который интегрируется в другие части приложения (например, в экран сканера).
- Использует `WarehouseViewModel` для получения данных и управления состоянием.
- Отображает `WarehouseCatalogScreen`, передавая ему список товаров и функции для взаимодействия.
- Реагирует на отсканированные QR-коды, отображая информацию о найденном товаре.

### `WarehouseViewModel.kt`

**Назначение:** `ViewModel` для модуля склада. Управляет бизнес-логикой и состоянием UI.
- Взаимодействует с `WarehouseRepository` для получения и обновления данных.
- Предоставляет `StateFlow` для списка товаров (`items`), журнала операций (`logs`), новостей (`newsItems`) и т.д., на которые подписывается UI.
- Содержит функции для выполнения действий пользователя: добавление товара, списание товара (`onTakeItem`), обработка сканирования (`onPartScanned`).
- Группирует записи журнала для удобного отображения.

### `WarehouseNewsModels.kt`

**Назначение:** Определяет модели данных для системы новостей склада.
- **`NewsTag`**: `enum` для категоризации новостей (например, "Сегодня", "Срочно") с соответствующим цветом.
- **`NewsItem`**: Модель для одной новости, содержащая заголовок, текст и тег.

### `WarehouseRepository.kt`

**Назначение:** Репозиторий, который инкапсулирует всю логику доступа к данным из Firebase Firestore.
- Предоставляет `Flow` для получения данных (товары, логи, новости) в реальном времени.
- Содержит `suspend` функции для выполнения CRUD-операций (создание, обновление, удаление) для товаров и новостей.
- Реализует транзакции для атомарного изменения количества товара на складе (`takeItem`).
- Содержит логику для загрузки демонстрационных данных.

### `WarehouseCatalogData.kt`

**Назначение:** Содержит статические демонстрационные данные для каталога склада.
- **`DemoCatalogItem`**: Модель данных для элемента в демо-каталоге.
- **`warehouseCatalogItems`**: Список с предопределенными товарами, который используется для первоначального заполнения базы данных через `WarehouseRepository`.

### `WarehouseAddItemScreen.kt`

**Назначение:** Экран для добавления нового товара на склад.
- Предоставляет пользователю форму для ввода всех необходимых данных о товаре (название, артикул, количество, категория).
- Поддерживает создание новых категорий "на лету".
- После заполнения формы вызывает callback-функцию `onItemCreated` для сохранения нового товара.

### `WarehouseNewsComponents.kt`

**Назначение:** Содержит UI-компоненты для создания и редактирования новостей.
- **`NewsEditSheet`**: Модальное окно (`ModalBottomSheet`) для добавления или редактирования новости. Включает поля для заголовка, содержания и выбора тега.

### `WarehouseCatalogComponents.kt`

**Назначение:** Содержит различные UI-компоненты для отображения каталога товаров.
- **`WarehouseCatalogScreen`**: Основной компонент экрана каталога, который объединяет поиск, фильтры, карусель и сетку товаров.
- **`CatalogGridItem`**: Карточка товара в сетке. Отображает изображение, название и остаток.
- **`QuantityPickerDialog`**: Диалоговое окно для выбора количества товара при списании.
- **`FrequentlyTakenCarousel`**: Карусель с часто забираемыми товарами.

### `WarehouseDashboardScreen.k.kt`

**Назначение:** Главный экран (панель управления) складского модуля.
- Отображает сводную информацию: виджет новостей, количество товаров с низким остатком, последние операции.
- Предоставляет быстрый доступ к основным функциям: каталогу, истории операций, сканеру.
- Позволяет администраторам управлять новостями.
- Содержит `ActivityLogSheet` для просмотра журнала и `NewsEditSheet` для управления новостями.

### `WarehouseActivityComponents.kt`

**Назначение:** Содержит UI-компоненты для отображения журнала активности склада.
- **`ActivityLogSheet`**: Модальное окно со списком последних сгруппированных операций.
- **`ActivityDetailSheet`**: Модальное окно с детальной информацией о конкретной операции.
- **`ActivityCard`**: Карточка для отображения одной операции в списке.
